port: 7890              # http(s) ä»£ç†ç«¯å£
socks-port: 7891        # socks4/4a/5 ä»£ç†ç«¯å£
mixed-port: 7892        # æ··åˆç«¯å£ åŒæ—¶æ”¯æŒ HTTP(S) å’Œ SOCKS5 åè®®
redir-port: 7893        # redirect é€æ˜ä»£ç†ç«¯å£,ä»…èƒ½ä»£ç† TCP æµé‡
tproxy-port: 7894       # tproxy é€æ˜ä»£ç†ç«¯å£,å¯ä»£ç† TCP ä¸ UDP æµé‡
mode: rule              # è¿è¡Œæ¨¡å¼ rule / global / direct ,Clash Meta æš‚ä¸æ”¯æŒ script
log-level: silent       # æ—¥å¿—çº§åˆ« silent / error / warning / info / debug
allow-lan: false        # å…è®¸å±€åŸŸç½‘è¿æ¥ false / true
ipv6: true              # IPv6 æ˜¯å¦å…è®¸å†…æ ¸æ¥å— IPv6 æµé‡
tcp-concurrent: true    # TCP å¹¶å‘ å¦‚æœåŸŸåè§£æç»“æœå¯¹åº”å¤šä¸ªIP,å¹¶å‘è¯·æ±‚æ‰€æœ‰IP,é€‰æ‹©æ¡æ‰‹æœ€å¿«çš„IPè¿›è¡Œé€šè®¯
keep-alive-interval: 1800 # TCP Keep Alive é—´éš”,å•ä½åˆ†é’Ÿ | æ§åˆ¶ Clash å‘å‡º TCP Keep Alive åŒ…çš„é—´éš”,å‡å°‘ç§»åŠ¨è®¾å¤‡è€—ç”µé—®é¢˜çš„ä¸´æ—¶æªæ–½
unified-delay: true     # ç»Ÿä¸€å»¶è¿Ÿ


geodata-mode: true                  # GEOIP æ•°æ®æ¨¡å¼,æ›´æ”¹ geoip ä½¿ç”¨æ–‡ä»¶,mmdb æˆ–è€… dat,å¯é€‰,true ä¸º dat
geosite-matcher: succinct          
geodata-loader: memconservative     # GEO æ–‡ä»¶åŠ è½½æ¨¡å¼ standard / memconservative
geo-auto-update: false              # è‡ªåŠ¨æ›´æ–° GEO æ˜¯å¦å¯ç”¨,å¯é€‰ true/false
geo-update-interval: 24             # æ›´æ–°é—´éš”,å•ä½å°æ—¶
geox-url:                           # è‡ªå®š GEO ä¸‹è½½åœ°å€
  geoip: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.metadb"

global-client-fingerprint: chrome   # å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹
external-controller: 0.0.0.0:9090   # API ç›‘å¬åœ°å€
secret: ""                          # API çš„è®¿é—®å¯†é’¥

#################### ç¼“å­˜ ####################
profile:
  store-selected: true              # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©,ä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-fake-ip: true               # fake-ip ç¼“å­˜,åŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶,ä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€

#################### NTP ####################
ntp:
  enable: false                     # æ˜¯å¦å¯ç”¨ NTP æœåŠ¡
  write-to-system: true             # æ˜¯å¦åŒæ­¥è‡³ç³»ç»Ÿæ—¶é—´,éœ€è¦ rootã€ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œ
  server: "ntp.tencent.com"         # NTP æœåŠ¡åœ°å€
  port: 123                         # NTP æœåŠ¡ç«¯å£,é»˜è®¤ 123
  interval: 60                      # åŒæ­¥æ—¶é—´é—´éš”,å•ä½ï¼ˆåˆ†ï¼‰,é»˜è®¤åŒæ­¥é—´éš”ä¸º 30 åˆ†

#################### åŸŸåå—…æ¢ ####################
sniffer:
  enable: true                      # æ˜¯å¦å¯ç”¨,å¯é€‰ true/false
  sniff:
    QUIC:
      ports: [443, 8443]
    TLS:                            # TLS é»˜è®¤å¦‚æœä¸é…ç½® ports é»˜è®¤å—…æ¢ 443
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true    # å¯è¦†ç›– sniffer.override-destination
  force-domain:
    - "+.v2ex.com"
  skip-domain:                      # éœ€è¦è·³è¿‡å—…æ¢çš„åŸŸå,ä¸»è¦è§£å†³éƒ¨åˆ†ç«™ç‚¹sniå­—æ®µéåŸŸå,å¯¼è‡´å—…æ¢ç»“æœå¼‚å¸¸çš„é—®é¢˜,å¦‚ç±³å®¶è®¾å¤‡
    - "Mijia Cloud"

#################### TUN ####################
tun:
  enable: false                     # æ˜¯å¦å¯ç”¨,å¯é€‰ true/false
  stack: system                     # tun æ¨¡å¼å †æ ˆ system / gvisor / mixed
  auto-route: true                  # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±,å¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥ tun ç½‘å¡
  auto-detect-interface: true       # è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æ¥å£,å¤šå‡ºå£ç½‘å¡åŒæ—¶è¿æ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡
  dns-hijack:                       # éœ€è¦åŠ«æŒçš„ DNS
    - "any:53"
    - "tcp://any:53"
    
#################### DNS ####################
dns:
  enable: true                      # å…³é—­å°†ä½¿ç”¨ç³»ç»Ÿ DNS
  listen: 127.0.0.1:8853            # å¼€å¯ DNS æœåŠ¡å™¨ç›‘å¬
  ipv6: true                        # false å°†è¿”å› AAAA çš„ç©ºç»“æœ
  ipv6-timeout: 300                 # å•ä½ï¼šms,å†…éƒ¨åŒæ ˆå¹¶å‘æ—¶,å‘ä¸Šæ¸¸æŸ¥è¯¢ AAAA æ—¶,ç­‰å¾… AAAA çš„æ—¶é—´,é»˜è®¤ 100ms
  enhanced-mode: fake-ip            # mihomo çš„ DNS å¤„ç†æ¨¡å¼ redir-host / fake-ip
  fake-ip-range: 28.0.0.1/8         # fakeip ä¸‹çš„ IP æ®µè®¾ç½® 198.18.0.1/16 28.0.0.1/8
  fake-ip-filter:                   # fakeip è¿‡æ»¤,ä»¥ä¸‹åœ°å€ä¸ä¼šä¸‹å‘ fakeip æ˜ å°„ç”¨äºè¿æ¥
    - "*"
    - "+.lan"
    - "+.invalid.*"
    - "+.localhost"
    - "+.local.*"
    - "+.time.*"
    - "+.ntp.*"
    - "+.time.edu.cn"
    - "+.ntp.org.cn"
    - "+.pool.ntp.org"
    - "+.qpic.cn"
    - "localhost.ptlogin2.qq.com"
    - "localhost.sec.qq.com"
    - "dns.msftncsi.com"
    - "www.msftncsi.com"
    - "www.msftconnecttest.com"
    - "time1.cloud.tencent.com"
  default-nameserver:               # ç”¨äºè§£æ nameserver,fallback ä»¥åŠå…¶ä»–DNSæœåŠ¡å™¨é…ç½®çš„,DNS æœåŠ¡åŸŸå,åªèƒ½ä½¿ç”¨çº¯ IP åœ°å€,å¯ä½¿ç”¨åŠ å¯†çš„IP DNS
    - 114.114.114.114               # å›½å†…ç§»åŠ¨ã€ç”µä¿¡å’Œè”é€šé€šç”¨çš„DNS IPv4
    - 8.8.8.8                       # google IPv4
    - 1.1.1.1                       # Cloudflare IPv4
    - 223.5.5.5                     # Alibaba IPv4
  nameserver-policy:                # ä½¿ç”¨æŒ‡å®šçš„ DNS æœåŠ¡å™¨,ä¼˜å…ˆäº nameserver/fallback æŸ¥è¯¢
    "geosite:private,cn":
    - "https://doh.pub/dns-query"           #é˜¿é‡Œäº‘å…¬å…±DNS
    - "https://dns.alidns.com/dns-query"    #è…¾è®¯DNS
    - "https://doh.360.cn/dns-query"        # 360å®‰å…¨DNS
  nameserver:                               # é»˜è®¤åŸŸåè§£ææœåŠ¡å™¨,å¦‚ä¸é…ç½® fallback/proxy-server-nameserver , åˆ™æ‰€æœ‰åŸŸåéƒ½ç”± nameserver è§£æ
    - "https://1.1.1.1/dns-query"           # Cloudflare IPv4 DoH
    - "https://1.0.0.1/dns-query"           # Cloudflare IPv4 DoH
    - "https://doh.pub/dns-query"           #é˜¿é‡Œäº‘å…¬å…±DNS
    - "https://dns.alidns.com/dns-query"    #è…¾è®¯DNS
    - "https://doh.360.cn/dns-query"        # 360å®‰å…¨DNS
  proxy-server-nameserver:                  # ä»…ç”¨äºè§£æä»£ç†èŠ‚ç‚¹çš„åŸŸå,é…ç½®æœåŠ¡å™¨è‹¥æŸ¥è¯¢å¤±è´¥å°†ä½¿ç”¨ nameserver,éå¹¶å‘æŸ¥è¯¢
    - "https://1.1.1.1/dns-query"           # Cloudflare IPv4 DoH
    - "https://1.0.0.1/dns-query"           # Cloudflare IPv4 DoH
    - "https://doh.pub/dns-query"           #é˜¿é‡Œäº‘å…¬å…±DNS
    - "https://dns.alidns.com/dns-query"    #è…¾è®¯DNS

#################### é”šç‚¹é…ç½® ####################   
proxy_providers: &proxy_providers           # ä»£ç†é›†åˆé”šç‚¹
  type: http                                # å¿…é¡»,providerç±»å‹,å¯é€‰http/file
  health-check:                             # å»¶è¿Ÿæµ‹è¯•
    enable: true                            # æ˜¯å¦å¯ç”¨,å¯é€‰ true/false
    url: http://www.gstatic.com/generate_204     # æµ‹é€Ÿç½‘å€
    interval: 3600                          # æµ‹è¯•é—´éš”,å¦‚ä¸ä¸º0åˆ™å¯ç”¨å®šæ—¶æµ‹è¯•,å•ä½ä¸ºç§’
    timeout: 5000                           # æµ‹è¯•è¶…æ—¶æ—¶é—´,å•ä½ä¸ºæ¯«ç§’
    udp: true                               # æ˜¯å¦å…è®¸ UDP é€šè¿‡ä»£ç†
    tfo: false                              # TCP å¿«é€Ÿæ‰“å¼€
    mptcp: true                             # TCP å¤šè·¯ä¼ è¾“
    skip-cert-verify: false                 # è·³è¿‡è¯ä¹¦éªŒè¯,ä»…é€‚ç”¨äºä½¿ç”¨tlsçš„åè®®
    #filter: "(?i)^(?!.*(?:éŸ©å›½|æ–°åŠ å¡)).*"   #ç­›é€‰åªéœ€è¦çš„èŠ‚ç‚¹
    #exclude-filter: "(?i)å¥—é¤|å‰©ä½™"           #æ’é™¤ä¸éœ€è¦çš„èŠ‚ç‚¹
 
use_all: &use_all # ç­–ç•¥ç»„é”šç‚¹
   use:           #å¼•å…¥æ‰€æœ‰ä»£ç†é›†åˆ
    # - 0.æ ¼å¼æ¨¡æ¿
    - 1.CUSTER
    
#################### ä»£ç†é›†åˆ ####################
  # 0.æ ¼å¼æ¨¡æ¿:
  #   <<: *proxy_providers 
  #   url: "http://1.1.1.1" (è®¢é˜…åœ°å€-æœ¬åœ°æ–‡ä»¶å¯å¿½ç•¥)
  #   path: ./proxy_providers/subscribe3.yaml  (å¯çµæ´»å˜æ›´-ä¸å¯å†²çª)

proxy-providers:
  1.CUSTER:
    <<: *proxy_providers                     # å¼•ç”¨ç›¸å…³é”šç‚¹
    url: "https://xb.bocchi.ooo/api/v1/client/subscribe?token=825f22fefd1908a3658f49f66e341e"
    path: ./proxy_providers/custom_subscribe1.yaml
    # æ³¨æ„!å¦‚æœæ‚¨çš„è®¢é˜…é“¾æ¥ä¸­å¸¦æœ‰â€œ&â€å­—ç¬¦,è¯·åˆ æ‰
    

proxies:
        
  - name: 'ğŸ‡¯ğŸ‡µTokyo'
    type: hysteria2
    server: tokyo.31415
    port: 10312
    password: kongzilong.hysteria
    skip-cert-verify: false
    
  - name: 'ğŸ‡¯ğŸ‡µtokyo-reality'
    type: 'vless'
    server: tokyo.31415
    port: 10125
    uuid: '8fba3579-7be1-4507-b825-dedc4bc69419'
    tls: true
    network: tcp
    servername: 'd1.awsstatic.com'
    flow: 'xtls-rprx-vision'
    client-fingerprint: 'chrome'
    skip-cert-verify: false
    reality-opts:
      public-key: 'ZKok9r6CNVKGMXpdM_ZvuIZdX5WSVHWtuzCZSFu8bSE'
      short-id: '44'
    
  - name: 'ğŸ‡²ğŸ‡¾Malaysia'
    type: 'vmess'
    server: 'tokyo.31415'
    port: 27602
    cipher: 'auto'
    uuid: 'abd55ad1-d994-42e9-b988-e80f2a1165ef'
    tls: false
    alterId: 0
    network: 'ws'
    ws-opts:
      path: '/abd55ad1'
      headers: {}


#################### ç­–ç•¥ç»„ ####################
proxy-groups:
  - {name: Proxy, type: select, proxies: [ğŸ‡¯ğŸ‡µTokyo,ğŸ‡¯ğŸ‡µtokyo-reality,ğŸ‡²ğŸ‡¾Malaysia,DIRECT], <<: *use_all, icon: https://raw.githubusercontent.com/kzlong/blogimage/main/QuantumultX/Proxy.png}
  - {name: OpenAI, type: select, proxies: [Proxy,ğŸ‡¯ğŸ‡µTokyo,ğŸ‡¯ğŸ‡µtokyo-reality,ğŸ‡²ğŸ‡¾Malaysia], exclude-filter: "(?i)å¥—é¤|å‰©ä½™", <<: *use_all, icon: https://raw.githubusercontent.com/kzlong/blogimage/main/QuantumultX/Chatgpt.png}
  - {name: Telegram, type: select, proxies: [Proxy,ğŸ‡¯ğŸ‡µTokyo,ğŸ‡¯ğŸ‡µtokyo-reality,ğŸ‡²ğŸ‡¾Malaysia], exclude-filter: "(?i)å¥—é¤|å‰©ä½™",<<: *use_all, icon: https://raw.githubusercontent.com/kzlong/blogimage/main/QuantumultX/Telegram.png}
  - {name: YouTube, type: select, proxies: [Proxy,ğŸ‡¯ğŸ‡µTokyo,ğŸ‡¯ğŸ‡µtokyo-reality,ğŸ‡²ğŸ‡¾Malaysia], exclude-filter: "(?i)å¥—é¤|å‰©ä½™",<<: *use_all, icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png}
  - {name: AD Block, type: select, proxies: [REJECT], icon: https://raw.githubusercontent.com/kzlong/blogimage/main/QuantumultX/Ad.png}
  - {name: Final, type: select, proxies: [Proxy,DIRECT], icon: https://raw.githubusercontent.com/kzlong/blogimage/main/QuantumultX/Others.png}

#################### è§„åˆ™é›†åˆ ####################  
rule-providers:

  Reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  Youtube:
    type: http
    behavior: classical
    url: "https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/YouTube/YouTube.yaml"
    path: ./ruleSet/YouTube.yaml
    interval: 86400

  OpenAI:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/kzlong/blogimage/main/ChatGPT.txt"
    path: ./ruleSet/ChatGPT.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  greatfire:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/greatfire.txt"
    path: ./ruleset/greatfire.yaml
    interval: 86400

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  selfdomain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/kzlong/blogimage/main/Mydirect.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400

#################### è·¯ç”±è§„åˆ™ ####################
rules:
  # 1password
  - DOMAIN-SUFFIX,1password.com,DIRECT
  # GoogleæœåŠ¡
  - DOMAIN-SUFFIX,services.googleapis.cn,Proxy
  # Googleé™æ€èµ„æº
  - DOMAIN-SUFFIX,gstatic.com,Proxy
  # Google Playä¸‹è½½æœåŠ¡
  - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,Proxy
  # Github Pages
  - DOMAIN-SUFFIX,github.io,Proxy
  # V2rayseèŠ‚ç‚¹å·¥å…·
  - DOMAIN-SUFFIX,v2rayse.com,Proxy
  # v2ex
  - DOMAIN-SUFFIX,i.imgur.com,Telegram
  - DOMAIN-SUFFIX,imgur.com,Telegram
  # Loyalsoldier è§„åˆ™é›†
  - RULE-SET,Youtube,YouTube
  - RULE-SET,OpenAI,OpenAI
  - RULE-SET,selfdomain,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,Reject,AD Block
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,google,Proxy
  - RULE-SET,proxy,Proxy
  - RULE-SET,gfw,Proxy
  - RULE-SET,tld-not-cn,Proxy
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT,no-resolve
  - RULE-SET,cncidr,DIRECT,no-resolve
  - RULE-SET,telegramcidr,Telegram,no-resolve
  # å…¶ä»–è§„åˆ™
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Final
